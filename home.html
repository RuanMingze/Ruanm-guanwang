<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ruanm - 用户体验至上</title>
    <meta name="description" content="Ruanm官网，提供阮铭泽工具箱等优质产品">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }

        :root {
            --primary-color: #4361ee;
            --secondary-color: #3a0ca3;
            --accent-color: #4cc9f0;
            --light-bg: #f8f9fa;
            --dark-bg: #121212;
            --card-bg: #ffffff;
            --text-dark: #2b2d42;
            --text-light: #f8f9fa;
            --shadow: 0 4px 20px rgba(0,0,0,0.1);
            --radius: 16px;
        }

        body {
            background-color: var(--light-bg);
            color: var(--text-dark);
            line-height: 1.6;
        }

        body.dark-mode {
            background-color: var(--dark-bg);
            color: var(--text-light);
        }

        body.dark-mode .card {
            background: #1e1e1e;
            color: var(--text-light);
        }

        body.dark-mode header {
            background: #1a1a1a;
            border-bottom: 1px solid #333;
        }

        body.dark-mode footer {
            background: #1a1a1a;
            border-top: 1px solid #333;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            background: var(--card-bg);
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
        }

        .logo-text {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary-color);
        }

        .nav-center {
            display: flex;
            justify-content: center;
            flex-grow: 1;
        }

        .nav-links {
            display: flex;
            gap: 30px;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--text-dark);
            font-weight: 500;
            transition: color 0.3s;
        }

        body.dark-mode .nav-links a {
            color: var(--text-light);
        }

        .nav-links a:hover {
            color: var(--primary-color);
        }

        .theme-toggle {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: var(--text-dark);
            transition: color 0.3s;
            margin-left: 10px; /* 向右移动主题切换按钮 */
        }

        body.dark-mode .theme-toggle {
            color: var(--text-light);
        }

        .theme-toggle:hover {
            color: var(--primary-color);
        }

        /* User Actions */
        .user-actions {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-right: 10px; /* 向左移动登录/注册按钮 */
        }

        .login-btn, .register-btn {
            padding: 8px 16px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s;
        }

        .login-btn {
            background: transparent;
            color: var(--text-dark);
            border: 1px solid var(--primary-color);
        }

        body.dark-mode .login-btn {
            color: var(--text-light);
        }

        .login-btn:hover {
            background: var(--primary-color);
            color: white;
        }

        .register-btn {
            background: var(--primary-color);
            color: white;
            border: 1px solid var(--primary-color);
        }

        .register-btn:hover {
            background: var(--secondary-color);
            border-color: var(--secondary-color);
        }

        /* User Profile */
        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            position: relative;
        }

        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
        }

        .username {
            font-weight: 500;
        }

        .dropdown-menu {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--card-bg);
            border-radius: 8px;
            box-shadow: var(--shadow);
            padding: 10px 0;
            min-width: 150px;
            display: none;
            z-index: 1000;
        }

        body.dark-mode .dropdown-menu {
            background: #1e1e1e;
        }

        .dropdown-menu a {
            display: block;
            padding: 10px 20px;
            color: var(--text-dark);
            text-decoration: none;
            transition: background 0.3s;
        }

        body.dark-mode .dropdown-menu a {
            color: var(--text-light);
        }

        .dropdown-menu a:hover {
            background: rgba(67, 97, 238, 0.1);
        }

        body.dark-mode .dropdown-menu a:hover {
            background: rgba(94, 114, 228, 0.2);
        }

        /* Hero Section */
        .hero {
            padding: 80px 0;
            text-align: center;
            background: linear-gradient(135deg, #f0f4f8, #e6e9f0);
            border-radius: 0 0 var(--radius) var(--radius);
            margin-bottom: 60px;
        }

        body.dark-mode .hero {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            color: var(--primary-color);
            line-height: 1.2;
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 30px;
            color: #555;
        }

        body.dark-mode .hero p {
            color: #aaa;
        }

        .cta-button {
            display: inline-block;
            padding: 15px 40px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            font-size: 1.1rem;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 4px 15px rgba(67, 97, 238, 0.3);
        }

        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(67, 97, 238, 0.4);
        }

        /* Products Section */
        .products {
            padding: 60px 0;
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 40px;
        }

        .card {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 30px;
            box-shadow: var(--shadow);
            transition: transform 0.3s, box-shadow 0.3s;
            text-align: center;
        }

        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }

        .product-icon {
            width: 100px;
            height: 100px;
            margin: 0 auto 25px;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 40px;
        }

        .card h3 {
            font-size: 1.8rem;
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        .card p {
            margin-bottom: 25px;
            color: #666;
        }

        body.dark-mode .card p {
            color: #bbb;
        }

        .download-button {
            display: inline-block;
            padding: 12px 30px;
            background: transparent;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
            margin: 5px;
        }

        .download-button:hover {
            background: var(--primary-color);
            color: white;
        }

        .github-button {
            background: #333;
            border-color: #333;
            color: white;
        }

        .github-button:hover {
            background: #555;
            border-color: #555;
        }

        /* Features Section */
        .features {
            padding: 60px 0;
            background: rgba(67, 97, 238, 0.05);
            border-radius: var(--radius);
            margin: 60px 0;
        }

        body.dark-mode .features {
            background: rgba(67, 97, 238, 0.1);
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
        }

        .feature-card {
            text-align: center;
            padding: 30px 20px;
        }

        .feature-icon {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .feature-card h4 {
            font-size: 1.4rem;
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        /* About Section */
        .about-section {
            padding: 60px 0;
            background: var(--card-bg);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin: 60px 0;
            display: none;
        }

        body.dark-mode .about-section {
            background: #1e1e1e;
        }

        .about-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .about-content h2 {
            text-align: center;
            margin-bottom: 30px;
            color: var(--primary-color);
        }

        .about-content h3 {
            margin: 25px 0 15px;
            color: var(--primary-color);
        }

        .about-content p {
            margin-bottom: 20px;
            line-height: 1.8;
        }

        /* Privacy Policy and Terms Sections */
        .policy-section {
            padding: 60px 0;
            background: var(--card-bg);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin: 60px 0;
            display: none;
        }

        body.dark-mode .policy-section {
            background: #1e1e1e;
        }

        .policy-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .policy-content h2 {
            text-align: center;
            margin-bottom: 30px;
            color: var(--primary-color);
        }

        .policy-content h3 {
            margin: 25px 0 15px;
            color: var(--primary-color);
        }

        .policy-content h4 {
            margin: 20px 0 10px;
            color: var(--secondary-color);
        }

        .policy-content p {
            margin-bottom: 15px;
            line-height: 1.8;
        }

        .policy-content ul {
            margin: 15px 0 15px 30px;
        }

        .policy-content li {
            margin-bottom: 10px;
            line-height: 1.8;
        }

        /* Footer */
        footer {
            background: var(--card-bg);
            padding: 40px 0;
            margin-top: 60px;
            border-top: 1px solid #eee;
        }

        body.dark-mode footer {
            border-top: 1px solid #333;
        }

        .footer-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .footer-logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .footer-logo .logo-icon {
            width: 40px;
            height: 40px;
            font-size: 18px;
        }

        .footer-logo .logo-text {
            font-size: 20px;
        }

        .footer-links {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .footer-links a {
            color: #666;
            text-decoration: none;
            transition: color 0.3s;
        }

        body.dark-mode .footer-links a {
            color: #aaa;
        }

        .footer-links a:hover {
            color: var(--primary-color);
        }

        .copyright {
            text-align: center;
            color: #888;
            font-size: 0.9rem;
            margin-top: 20px;
        }

        body.dark-mode .copyright {
            color: #aaa;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .navbar {
                flex-direction: column;
                gap: 20px;
            }

            .nav-center {
                order: 2;
                margin: 15px 0;
            }

            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
            }

            .hero h1 {
                font-size: 2.5rem;
            }

            .section-title {
                font-size: 2rem;
            }
            
            .user-actions {
                margin-top: 15px;
            }
        }
    </style>
</head>
<body>
    <!-- 引入配置文件 -->
    <script src="config.js"></script>
    
    <!-- Header -->
    <header>
        <div class="container">
            <nav class="navbar">
                <div class="logo">
                    <div class="logo-icon">
                        <img src="logo.png" alt="Ruanm Logo" style="width: 100%; height: 100%; object-fit: contain;">
                    </div>
                    <div class="logo-text">Ruanm</div>
                </div>
                <div class="nav-center">
                    <div class="nav-links">
                        <a href="#home">首页</a>
                        <a href="#products">产品</a>
                        <a href="#features">特性</a>
                        <a href="about.html">关于</a>
                        <a href="privacy.html">隐私政策</a>
                        <a href="terms.html">使用条款</a>
                    </div>
                </div>
                <div class="user-actions" id="userActions">
                    <!-- 未登录状态显示登录/注册按钮 -->
                    <a href="login.html" class="login-btn">登录</a>
                    <a href="register.html" class="register-btn">注册</a>
                </div>
                
                <!-- 登录后显示用户信息 -->
                <div class="user-profile" id="userProfile" style="display: none;">
                    <img src="https://ui-avatars.com/api/?name=U&background=4361ee&color=fff&size=40" alt="用户头像" class="avatar" id="userAvatar">
                    <span class="username" id="userName">用户名</span>
                    <div class="dropdown-menu" id="dropdownMenu">
                        <a href="toolbox.html">工具箱</a>
                        <a href="avatar-settings.html">头像设置</a>
                        <a href="#" id="logoutBtn">退出登录</a>
                    </div>
                </div>
                <button class="theme-toggle" id="themeToggle" aria-label="切换主题">
                    <i class="fas fa-moon"></i>
                </button>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="container">
            <h1>用户体验至上</h1>
            <p>我们致力于创造卓越的数字体验，提供高效、易用的工具和产品，让科技更好地服务于生活。</p>
            <a href="#products" class="cta-button">探索产品</a>
            <a href="https://pan.baidu.com/s/1ff3zFG75x-xvI89kQ5oxmw?pwd=ruan" class="cta-button" style="margin-left: 20px; background: linear-gradient(135deg, var(--accent-color), var(--primary-color));" target="_blank" rel="noopener">全部产品一键下载</a>
        </div>
    </section>

    <!-- Products Section -->
    <section class="products" id="products">
        <div class="container">
            <h2 class="section-title">我们的产品</h2>
            <div class="product-grid">
                <!-- 阮铭泽工具箱 -->
                <div class="card">
                    <div class="product-icon">
                        <img src="阮铭泽工具箱/icon.png" alt="阮铭泽工具箱" style="width: 100%; height: 100%; object-fit: contain;">
                    </div>
                    <h3>阮铭泽工具箱</h3>
                    <p>多功能在线工具集合，包含天气查询、计算器、编程工具、系统知识等实用功能，助您提高工作效率。</p>
                    <a href="toolbox.html" class="download-button">查看详情</a>
                    <a href="https://github.com/RuanMingze/Ruanmze-toolbox-desktop/releases" class="download-button github-button" target="_blank" rel="noopener">GitHub下载</a>
                </div>
                
                <!-- VMware++ 修改器 -->
                <div class="card">
                    <div class="product-icon">
                        <img src="VMware++/VMware.ico" alt="VMware++ 修改器" style="width: 100%; height: 100%; object-fit: contain;">
                    </div>
                    <h3>VMware++ 修改器</h3>
                    <p>专为VMware虚拟机优化的图形化工具，提升macOS虚拟机兼容性，支持SMC仿真和AMD处理器优化。</p>
                    <a href="vmware++.html" class="download-button">查看详情</a>
                    <a href="https://github.com/RuanMingze/VMware-plus" class="download-button github-button" target="_blank" rel="noopener">GitHub下载</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features" id="features">
        <div class="container">
            <h2 class="section-title">核心特性</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <h4>极致性能</h4>
                    <p>优化的架构设计，确保产品运行流畅，响应迅速。</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h4>安全保障</h4>
                    <p>多重安全防护机制，保护用户数据和隐私安全。</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-sync"></i>
                    </div>
                    <h4>持续更新</h4>
                    <p>定期更新功能和优化，不断提升用户体验。</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-user-friends"></i>
                    </div>
                    <h4>用户至上</h4>
                    <p>以用户需求为导向，打造贴心易用的产品体验。</p>
                </div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section class="about-section" id="about">
        <div class="container">
            <div class="about-content">
                <h2>关于我们</h2>
                <p>Ruanm是一家专注于创造卓越数字体验的科技公司。我们致力于开发高效、易用的工具和产品，让科技更好地服务于人们的日常生活和工作。</p>
                
                <h3>我们的使命</h3>
                <p>通过创新的技术解决方案，提升用户的工作效率和生活质量，让复杂的技术变得简单易用。</p>
                
                <h3>我们的愿景</h3>
                <p>成为用户信赖的科技伙伴，通过持续的技术创新和优质的产品服务，推动数字化生活的发展。</p>
                
                <h3>核心价值观</h3>
                <p><strong>用户至上：</strong>始终以用户需求为导向，打造贴心易用的产品体验。</p>
                <p><strong>创新驱动：</strong>不断探索新技术，推动产品和服务的持续改进。</p>
                <p><strong>品质保证：</strong>严格的质量控制，确保每一款产品都达到最高标准。</p>
                <p><strong>诚信经营：</strong>坚持诚实守信的原则，与用户建立长期信任关系。</p>
                
                <h3>团队介绍</h3>
                <p>我们的团队由一群充满激情和创造力的技术专家组成，拥有丰富的行业经验和深厚的技术功底。我们相信，优秀的团队是创造卓越产品的基础。</p>
            </div>
        </div>
    </section>

    <!-- Privacy Policy Section -->
    <section class="policy-section" id="privacy">
        <div class="container">
            <div class="policy-content">
                <h2>隐私政策</h2>
                <p>最后更新时间：2025年11月1日</p>
                
                <p>我们尊重并保护所有使用服务用户的个人隐私权。为了给您提供更准确、更有个性化的服务，我们将按照本隐私权政策的规定使用和披露您的个人信息。但我们将以高度的勤勉、审慎义务对待这些信息。除本隐私权政策另有规定外，在未征得您事先许可的情况下，我们不会将这些信息对外披露或向第三方提供。</p>
                
                <h3>信息收集</h3>
                <p>我们不主动收集用户的个人信息，仅在用户主动提供时才会保存相关信息。我们可能收集的信息包括但不限于：</p>
                <ul>
                    <li>您在使用我们服务时主动提供的信息</li>
                    <li>您在注册账户时提供的信息</li>
                    <li>您在使用产品过程中产生的使用数据</li>
                </ul>
                
                <h3>信息使用</h3>
                <p>我们收集的信息将用于：</p>
                <ul>
                    <li>提供、维护和改善我们的产品和服务</li>
                    <li>开发新的产品和服务</li>
                    <li>保护用户安全和合法权益</li>
                    <li>与您进行沟通和联系</li>
                    <li>进行数据分析和市场研究</li>
                </ul>
                
                <h3>信息披露</h3>
                <p>未经您同意，我们不会与任何无关第三方分享您的个人信息。但在以下情况下，我们可能会披露您的信息：</p>
                <ul>
                    <li>根据法律法规的要求</li>
                    <li>为保护我们或其他用户的权利、财产或安全</li>
                    <li>在涉及合并、收购或资产出售时，转移相关信息</li>
                </ul>
                
                <h3>信息安全</h3>
                <p>我们采取各种预防措施保护您的信息安全，防止信息丢失、误用、未经授权的访问、披露、修改或破坏：</p>
                <ul>
                    <li>使用加密技术保护数据传输安全</li>
                    <li>定期进行安全审计和漏洞扫描</li>
                    <li>限制员工对用户信息的访问权限</li>
                    <li>建立完善的安全管理制度</li>
                </ul>
                
                <h3>您的权利</h3>
                <p>您有权：</p>
                <ul>
                    <li>访问、更正或删除您的个人信息</li>
                    <li>拒绝或限制我们处理您的个人信息</li>
                    <li>获取您个人信息的副本</li>
                    <li>撤回您对个人信息处理的同意</li>
                </ul>
                
                <h3>政策变更</h3>
                <p>我们可能会不时更新本隐私政策。如有重大变更，我们将在产品中通过明显方式通知您。</p>
                
                <h3>联系我们</h3>
                <p>如果您对本隐私政策有任何疑问，请通过以下方式联系我们：</p>
                <p>邮箱：xmt20160124@outlook.com</p>
            </div>
        </div>
    </section>

    <!-- Terms of Service Section -->
    <section class="policy-section" id="terms">
        <div class="container">
            <div class="policy-content">
                <h2>使用条款</h2>
                <p>最后更新时间：2025年11月1日</p>
                
                <p>欢迎使用我们的产品和服务。请您在使用前仔细阅读以下条款。</p>
                
                <h3>接受条款</h3>
                <p>通过访问或使用我们的服务，您表示同意接受本协议所有条款的约束。如果您不同意本协议的任何条款，请立即停止使用我们的服务。</p>
                
                <h3>服务说明</h3>
                <p>我们提供的所有服务均"按现状"提供，不提供任何形式的担保，包括但不限于适销性、特定用途适用性和不侵权的担保。</p>
                
                <h3>用户责任</h3>
                <p>您在使用我们的服务时，应遵守所有适用的法律法规，并对您的行为负责：</p>
                <ul>
                    <li>不得利用服务从事任何违法活动</li>
                    <li>不得侵犯他人的知识产权或其他合法权益</li>
                    <li>不得传播病毒、恶意软件或其他有害内容</li>
                    <li>不得干扰服务的正常运行</li>
                </ul>
                
                <h3>知识产权</h3>
                <p>我们的产品和服务包含受版权、商标和其他法律保护的材料，未经授权不得使用：</p>
                <ul>
                    <li>所有软件、文本、图像、音频、视频等内容归我们或其许可方所有</li>
                    <li>未经明确书面许可，不得复制、修改、分发或商业使用</li>
                    <li>用户在使用服务过程中产生的内容归用户所有</li>
                </ul>
                
                <h3>服务变更和终止</h3>
                <p>我们保留随时修改、暂停或终止服务的权利，无需事先通知：</p>
                <ul>
                    <li>我们可能会增加或删除服务功能</li>
                    <li>我们可能会更改服务的收费政策</li>
                    <li>在某些情况下，我们可能会暂停或终止服务</li>
                </ul>
                
                <h3>费用和支付</h3>
                <p>所有服务完全免费，无需支付任何费用：</p>
                <ul>
                    <li>我们致力于为所有用户提供免费的高质量服务</li>
                    <li>您无需支付任何费用即可享受所有功能</li>
                    <li>我们承诺不会对现有服务收取费用</li>
                </ul>
                
                <h3>免责条款</h3>
                <p>在法律允许的最大范围内，我们不对任何直接、间接、特殊或后果性损害承担责任：</p>
                <ul>
                    <li>因使用或无法使用服务造成的损失</li>
                    <li>因服务中断或延迟造成的损失</li>
                    <li>因数据丢失或损坏造成的损失</li>
                    <li>因第三方行为造成的损失</li>
                </ul>
                
                <h3>争议解决</h3>
                <p>本协议的解释和执行适用中华人民共和国法律。如发生争议，双方应友好协商解决；协商不成的，任何一方可向有管辖权的人民法院提起诉讼。</p>
                
                <h3>其他条款</h3>
                <p>本协议构成您与我们之间的完整协议，取代之前的所有口头或书面协议。如果本协议的任何条款被认定为无效或不可执行，其余条款仍然有效。</p>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <div class="logo-icon">
                        <img src="logo.png" alt="Ruanm Logo" style="width: 100%; height: 100%; object-fit: contain;">
                    </div>
                    <div class="logo-text">Ruanm</div>
                </div>
                <div class="footer-links">
                    <a href="#home">首页</a>
                    <a href="#products">产品</a>
                    <a href="#features">特性</a>
                    <a href="about.html">关于</a>
                    <a href="privacy.html">隐私政策</a>
                    <a href="terms.html">使用条款</a>
                </div>
                <div class="copyright">
                    &copy; 2025 Ruanm. 保留所有权利。
                </div>
            </div>
        </div>
    </footer>

    <script src="debug-cookies.js"></script>
    <script>
        // Cookie 操作函数
        function setCookie(name, value, days) {
            try {
                // 优先使用localStorage存储
                localStorage.setItem(name, value);
                
                // 同时设置Cookie作为备份
                const d = new Date();
                d.setTime(d.getTime() + (days * 24 * 60 * 60 * 1000));
                const expires = "expires=" + d.toUTCString();
                // 添加更完整的Cookie属性以确保跨页面访问
                document.cookie = name + "=" + value + ";" + expires + ";path=/;SameSite=Lax";
            } catch (error) {
                console.log('存储功能不可用，使用默认设置');
            }
        }
        
        function getCookie(name) {
            try {
                // 优先从 localStorage 读取
                const localValue = localStorage.getItem(name);
                if (localValue !== null) {
                    return localValue;
                }
                
                // 如果 localStorage 中没有，尝试从 Cookie 读取
                const cookieName = name + "=";
                const decodedCookie = decodeURIComponent(document.cookie);
                const cookieArray = decodedCookie.split(';');
                
                for (let i = 0; i < cookieArray.length; i++) {
                    let cookie = cookieArray[i];
                    while (cookie.charAt(0) === ' ') {
                        cookie = cookie.substring(1);
                    }
                    if (cookie.indexOf(cookieName) === 0) {
                        const value = cookie.substring(cookieName.length, cookie.length);
                        // 同步到 localStorage
                        try {
                            localStorage.setItem(name, value);
                        } catch (e) {}
                        return value;
                    }
                }
            } catch (error) {
                console.log('读取存储数据失败');
            }
            return "";
        }
        
        // Theme toggle functionality
        const themeToggle = document.getElementById('themeToggle');
        const themeIcon = themeToggle.querySelector('i');
        
        // Check for saved theme preference or respect OS preference
        const savedTheme = getCookie('theme');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        
        if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
            document.body.classList.add('dark-mode');
            themeIcon.classList.remove('fa-moon');
            themeIcon.classList.add('fa-sun');
        }
        
        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            
            if (document.body.classList.contains('dark-mode')) {
                themeIcon.classList.remove('fa-moon');
                themeIcon.classList.add('fa-sun');
                setCookie('theme', 'dark', 30);
            } else {
                themeIcon.classList.remove('fa-sun');
                themeIcon.classList.add('fa-moon');
                setCookie('theme', 'light', 30);
            }
        });
        
        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    window.scrollTo({
                        top: target.offsetTop - 80,
                        behavior: 'smooth'
                    });
                }
            });
        });
        
        // GitHub OAuth登录功能
        function githubLogin() {
            // GitHub OAuth配置
            const clientId = 'Ov23li1BLwSUypXu95Au';
            const redirectUri = window.location.origin + '/oauth-callback'; // 修复：移除.html后缀以匹配GitHub配置
            
            // 生成随机state参数
            const state = Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);
            setCookie('oauth_state', state, 1);
            setCookie('oauth_provider', 'github', 1);
            
            // 构造GitHub OAuth授权URL，包含更详细的scopes
            const scope = 'read:user,user:email'; // 读取用户基本信息和邮箱
            const authUrl = `https://github.com/login/oauth/authorize?client_id=${clientId}&redirect_uri=${encodeURIComponent(redirectUri)}&state=${state}&scope=${encodeURIComponent(scope)}`;
            
            // 跳转到GitHub授权页面
            window.location.href = authUrl;
        }
        
        // 用户信息显示和退出登录功能
        function updateUserInfo() {
            // 检查用户是否已登录
            const currentUser = getCookie('currentUser');
            
            if (currentUser) {
                // 用户已登录，显示用户信息
                const user = JSON.parse(currentUser);
                document.getElementById('userActions').style.display = 'none';
                document.getElementById('userProfile').style.display = 'flex';
                // 确保用户名不为空，如果为空则使用默认值"Ruanm用户"
                document.getElementById('userName').textContent = (user.name && user.name.trim() !== '') ? user.name : 'Ruanm用户';
                
                // 设置用户头像
                const userAvatar = document.getElementById('userAvatar');
                if (user.avatar && user.avatar.trim() !== '') {
                    // 如果用户有自定义头像，使用自定义头像
                    userAvatar.src = user.avatar;
                } else if (user.avatar_url && user.avatar_url.trim() !== '') {
                    // 如果用户有第三方平台头像，使用第三方头像
                    userAvatar.src = user.avatar_url;
                } else {
                    // 如果没有头像，则使用默认的工具箱图标或生成头像
                    if (user.provider === 'github') {
                        userAvatar.src = '阮铭泽工具箱/icon.jpg';
                    } else {
                        userAvatar.src = `https://ui-avatars.com/api/?name=${encodeURIComponent(user.name || user.username || 'U')}&background=4361ee&color=fff&size=40`;
                    }
                }
                
                // 应用用户的主题设置
                if (user.theme) {
                    if (user.theme === 'dark') {
                        document.body.classList.add('dark-mode');
                        // 更新主题切换按钮图标
                        const themeIcon = document.querySelector('#themeToggle i');
                        if (themeIcon) {
                            themeIcon.classList.remove('fa-moon');
                            themeIcon.classList.add('fa-sun');
                        }
                        setCookie('theme', 'dark', 30);
                    } else {
                        document.body.classList.remove('dark-mode');
                        // 更新主题切换按钮图标
                        const themeIcon = document.querySelector('#themeToggle i');
                        if (themeIcon) {
                            themeIcon.classList.remove('fa-sun');
                            themeIcon.classList.add('fa-moon');
                        }
                        setCookie('theme', 'light', 30);
                    }
                }
                
                // 绑定退出登录事件
                document.getElementById('logoutBtn').addEventListener('click', function(e) {
                    e.preventDefault();
                    // 确认退出登录
                    if (confirm('确定要退出我的账号吗？')) {
                        // 清除用户信息
                        localStorage.removeItem('currentUser');
                        // 清除Cookie
                        document.cookie = "currentUser=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
                        // 显示登录/注册按钮
                        document.getElementById('userActions').style.display = 'flex';
                        document.getElementById('userProfile').style.display = 'none';
                    }
                });
                
                // 下拉菜单显示/隐藏
                const userProfile = document.getElementById('userProfile');
                const dropdownMenu = document.getElementById('dropdownMenu');
                
                userProfile.addEventListener('click', function(e) {
                    e.stopPropagation();
                    dropdownMenu.style.display = dropdownMenu.style.display === 'block' ? 'none' : 'block';
                });
                
                // 点击页面其他地方隐藏下拉菜单
                document.addEventListener('click', function() {
                    dropdownMenu.style.display = 'none';
                });
            }
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            updateUserInfo();
        });
    </script>
</body>
</html>